<div class="card proyecto-card shadow-sm h-100">
  <div class="image-wrapper">
    <div [id]="carouselId" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <ng-container *ngIf="imagenesActivas.length > 0; else sinImagenes">
          <div
            class="carousel-item"
            *ngFor="let imagen of imagenesActivas; let i = index"
            [class.active]="i === 0"
          >
            <div class="imagen-container">
              <img
                [src]="imagen.UrlImagen"
                class="d-block w-100 proyecto-imagen"
                [alt]="obtenerAltText(imagen, i)"
              />
            </div>
          </div>
        </ng-container>

        <ng-template #sinImagenes>
          <div class="carousel-item active">
            <div
              class="imagen-container imagen-placeholder d-flex align-items-center justify-content-center"
            >
              <i class="bi bi-image text-muted" style="font-size: 4rem"></i>
            </div>
          </div>
        </ng-template>
      </div>

      <div class="carousel-controls-custom" *ngIf="imagenesActivas.length > 1">
        <button
          class="control-btn prev"
          type="button"
          [attr.data-bs-target]="'#' + carouselId"
          data-bs-slide="prev"
        >
          <i class="bi bi-arrow-left"></i>
        </button>
        <button
          class="control-btn next"
          type="button"
          [attr.data-bs-target]="'#' + carouselId"
          data-bs-slide="next"
        >
          <i class="bi bi-arrow-right"></i>
        </button>
      </div>
    </div>
  </div>

  <div class="info-overlay-container">
    <div class="info-card">
      <div class="info-header">
        <h5 class="proyecto-titulo">{{ titulo }}</h5>
        <div class="proyecto-subtitulo" *ngIf="subtitulo">
          {{ subtitulo }}
        </div>
      </div>

      <div class="info-body">
        <div class="descripcion-content">
          <p class="card-text text-muted small descripcion-texto">
            {{ proyecto.Descripcion || "Sin descripci√≥n" }}
          </p>
        </div>

        <div class="mt-3 d-flex gap-2 justify-content-center" *ngIf="modoAdmin">
          <button
            type="button"
            class="btn btn-sm btn-outline-primary"
            (click)="onAdministrarImagenes()"
          >
            <i class="bi bi-images"></i>
          </button>
          <button
            type="button"
            class="btn btn-sm btn-outline-secondary"
            (click)="onEditarProyecto()"
          >
            <i class="bi bi-pencil"></i>
          </button>
          <button
            type="button"
            class="btn btn-sm btn-outline-danger"
            (click)="onEliminarProyecto()"
          >
            <i class="bi bi-trash"></i>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
